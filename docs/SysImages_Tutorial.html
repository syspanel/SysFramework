<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SysImages Tutorial</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding-top: 20px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 900px;
        }
        .section-header {
            margin-bottom: 20px;
        }
        .code-example {
            background-color: #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin-top: 10px;
            overflow-x: auto;
        }
        .code-example pre {
            margin: 0;
            white-space: pre-wrap;
        }
        .highlight {
            background-color: #d1e7dd;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1 class="text-center mb-4">Tutorial da Classe <code>SysImages</code></h1>
            <p class="lead text-center">Aprenda a usar a classe <code>SysImages</code> para manipulação de imagens em PHP.</p>
        </header>

        <section id="intro" class="section-header">
            <h2>Introdução</h2>
            <p>A classe <code>SysImages</code> permite a manipulação de imagens nos formatos <code>.jpg</code>, <code>.jpeg</code>, <code>.bmp</code>, <code>.tif</code>, <code>.png</code>, e <code>.webp</code>. Com ela, você pode redimensionar imagens, alterar sua resolução e salvá-las no formato <code>.jpg</code>.</p>
        </section>

        <section id="code" class="section-header">
            <h2>Código da Classe <code>SysImages</code></h2>
            <div class="code-example">
                <pre>
<code>
&lt;?php

class SysImages
{
    private $image;
    private $imageType;

    public function __construct($filePath)
    {
        $this->load($filePath);
    }

    private function load($filePath)
    {
        $imageInfo = getimagesize($filePath);
        $this->imageType = $imageInfo[2];

        switch ($this->imageType) {
            case IMAGETYPE_JPEG:
                $this->image = imagecreatefromjpeg($filePath);
                break;
            case IMAGETYPE_PNG:
                $this->image = imagecreatefrompng($filePath);
                break;
            case IMAGETYPE_GIF:
                $this->image = imagecreatefromgif($filePath);
                break;
            case IMAGETYPE_BMP:
                $this->image = imagecreatefrombmp($filePath);
                break;
            case IMAGETYPE_TIFF_II:
            case IMAGETYPE_TIFF_MM:
                $this->image = imagecreatefromtiff($filePath);
                break;
            case IMAGETYPE_WEBP:
                $this->image = imagecreatefromwebp($filePath);
                break;
            default:
                throw new Exception('Unsupported image type.');
        }
    }

    public function resize($width, $height)
    {
        $newImage = imagecreatetruecolor($width, $height);

        // Preserve transparency for PNG and GIF
        if ($this->imageType == IMAGETYPE_PNG || $this->imageType == IMAGETYPE_GIF) {
            imagealphablending($newImage, false);
            imagesavealpha($newImage, true);
            $transparent = imagecolorallocatealpha($newImage, 0, 0, 0, 127);
            imagefilledrectangle($newImage, 0, 0, $width, $height, $transparent);
        }

        imagecopyresampled($newImage, $this->image, 0, 0, 0, 0, $width, $height, imagesx($this->image), imagesy($this->image));
        $this->image = $newImage;
    }

    public function setResolution($dpiX, $dpiY)
    {
        // Set image resolution in DPI (not supported by all formats)
        if ($this->imageType == IMAGETYPE_JPEG) {
            // JPEG supports DPI settings
            imagejpeg($this->image, null, 100, $dpiX, $dpiY);
        }
    }

    public function save($filename)
    {
        // Always save as JPEG
        imagejpeg($this->image, $filename, 90); // Quality is set to 90
    }

    public function __destruct()
    {
        if ($this->image) {
            imagedestroy($this->image);
        }
    }
}
</code>
                </pre>
            </div>
        </section>

        <section id="usage" class="section-header">
            <h2>Uso da Classe</h2>
            <p>Veja como usar a classe <code>SysImages</code> para realizar operações básicas de manipulação de imagens.</p>

            <h3>Exemplo: Redimensionar e Salvar Imagem</h3>
            <div class="code-example">
                <pre>
<code>
&lt;?php

// Crie uma instância da classe SysImages
$image = new SysImages('caminho/para/imagem.png');

// Redimensione a imagem para 800x600 pixels
$image->resize(800, 600);

// Salve a imagem redimensionada como um arquivo JPEG
$image->save('/store/upload/imagem_redimensionada.jpg');
</code>
                </pre>
            </div>
        </section>

        <section id="methods" class="section-header">
            <h2>Métodos da Classe</h2>
            <p>A classe <code>SysImages</code> inclui os seguintes métodos:</p>

            <ul>
                <li><strong><code>__construct($filePath)</code></strong> - Carrega a imagem do caminho fornecido.</li>
                <li><strong><code>resize($width, $height)</code></strong> - Redimensiona a imagem para as dimensões fornecidas.</li>
                <li><strong><code>setResolution($dpiX, $dpiY)</code></strong> - Define a resolução da imagem em DPI (aplicável principalmente a JPEG).</li>
                <li><strong><code>save($filename)</code></strong> - Salva a imagem como um arquivo JPEG no caminho fornecido.</li>
                <li><strong><code>__destruct()</code></strong> - Libera a memória alocada para a imagem.</li>
            </ul>
        </section>

        <section id="notes" class="section-header">
            <h2>Notas Adicionais</h2>
            <p>Certifique-se de que o diretório <code>/store/upload</code> tem permissões adequadas para escrita. Além disso, a função <code>imagecreatefromtiff</code> pode exigir uma biblioteca adicional para lidar com arquivos TIFF.</p>
        </section>

        <footer class="text-center mt-4">
            <p>&copy; 2025 SysFramework. Todos os direitos reservados.</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>

</html>
