<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial: Ferramenta SysSanitize</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        h1, h2, h3 {
            color: #0056b3;
        }
        code {
            background-color: #e4e4e4;
            padding: 2px 4px;
            border-radius: 3px;
        }
        pre {
            background-color: #e4e4e4;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .section {
            margin-bottom: 20px;
        }
        .note {
            background-color: #d9edf7;
            border-left: 4px solid #31708f;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Tutorial: Criando e Usando a Ferramenta <code>SysSanitize</code></h1>

        <div class="section">
            <h2>1. Introdução</h2>
            <p>
                Neste tutorial, vamos desenvolver uma ferramenta PHP chamada <code>SysSanitize</code> 
                para sanitizar dados de entrada em um aplicativo web. A ferramenta será implementada 
                em uma classe própria, sem a necessidade de pacotes externos, e poderá ser utilizada 
                em todas as páginas do seu aplicativo.
            </p>
        </div>

        <div class="section">
            <h2>2. Criando a Classe <code>SysSanitize</code></h2>
            <p>
                Primeiro, vamos criar a classe <code>SysSanitize</code> no arquivo 
                <code>/core/sysSanitize.php</code>. Essa classe terá métodos para sanitizar strings e 
                arrays de forma recursiva.
            </p>
            <pre><code>
// /core/sysSanitize.php

class SysSanitize {
    // Método para remover tags HTML e codificar caracteres especiais
    public static function sanitizeString($string) {
        return htmlspecialchars(strip_tags($string), ENT_QUOTES, 'UTF-8');
    }

    // Método para sanitizar arrays recursivamente
    public static function sanitizeArray($array) {
        foreach ($array as $key => $value) {
            if (is_array($value)) {
                $array[$key] = self::sanitizeArray($value);
            } else {
                $array[$key] = self::sanitizeString($value);
            }
        }
        return $array;
    }

    // Método para sanitizar inputs gerais (strings ou arrays)
    public static function sanitize($input) {
        if (is_array($input)) {
            return self::sanitizeArray($input);
        }
        return self::sanitizeString($input);
    }
}
            </code></pre>
        </div>

        <div class="section">
            <h2>3. Aplicando a Sanitização nas Páginas</h2>
            <p>
                Para utilizar a ferramenta <code>SysSanitize</code> em suas páginas, basta chamar o 
                método <code>sanitize()</code> antes de processar os dados de entrada.
            </p>
            <pre><code>
// Inclua a classe de sanitização
require_once '/core/sysSanitize.php';

// Suponha que você tenha dados POST
$_POST = SysSanitize::sanitize($_POST);

// Agora você pode usar os dados sanitizados
$nome = $_POST['nome'];
$email = $_POST['email'];

// Continua o processamento dos dados...
            </code></pre>
        </div>

        <div class="section">
            <h2>4. Middleware para Sanitização Global</h2>
            <p>
                Para garantir que todos os dados sejam sanitizados automaticamente, você pode criar 
                um middleware que aplique a sanitização em todas as páginas.
            </p>
            <pre><code>
// /core/middleware.php

require_once '/core/sysSanitize.php';

function sanitizeMiddleware() {
    $_POST = SysSanitize::sanitize($_POST);
    $_GET = SysSanitize::sanitize($_GET);
    $_REQUEST = SysSanitize::sanitize($_REQUEST);
}

// Chama o middleware em todas as páginas
sanitizeMiddleware();
            </code></pre>
            <p>
                Em seguida, inclua esse middleware em todas as suas páginas:
            </p>
            <pre><code>
&lt;?php
require_once '/core/middleware.php';

// O restante do código da sua página
?>
            </code></pre>
        </div>

        <div class="section">
            <h2>5. Considerações Finais</h2>
            <p>
                A classe <code>SysSanitize</code> é flexível e pode ser expandida para incluir métodos 
                adicionais de sanitização, conforme necessário. É importante testar a sanitização em 
                diferentes cenários para garantir que todos os tipos de entradas maliciosas sejam 
                devidamente tratados.
            </p>
            <div class="note">
                <strong>Dica:</strong> Considere adicionar validações adicionais, como a remoção de 
                espaços em branco e a normalização de entradas, dependendo das necessidades do seu 
                aplicativo.
            </div>
        </div>
    </div>
</body>
</html>
